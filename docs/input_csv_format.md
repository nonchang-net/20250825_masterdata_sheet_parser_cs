# 入力用CSVの形式の説明

## 概要

このシステムでは、Google Sheetsで作成したデータを元に、CSV形式でダウンロードしてからゲーム用のマスターデータとして使える形のjsonへ変換するという手順を踏んでいます。

入力作業の簡易化と、出力内容の制御のため、いくつかのルールがあります。

## システム処理フラグ行について

シートの冒頭には、A列に「server_needed」「client_needed」「is_array」「column_name」から始まる行があります。
これらの行は以下をコントロールする目的で配置されています。

- server_needed行
    - 実データの各列が、サーバ用マスターデータとして必要な列かどうかを示すチェックボックス行です。
    - サーバ用マスターデータ出力の実装時に、このフラグを見てjson出力に含めるかどうかを判定する予定です。

- client_needed行
    - server_needed同様に、クライアント用に出力すべきかどうかを示すチェックボックス行です。
    - 現在の実装では、ここにチェックが入っていない内容はjson出力に含めないように実装しています。

- is_array行
    - シート中に配列展開情報のセットを含めるためのフラグです。
    - このフラグがついているセットについて、実データの後続行に「このフラグのセットにしか情報が入っていない行」が検出された際は、元の行の配列情報として連結したjsonを生成します。

- column_name行
    - 実データのカラム名を示します。

- 実データ
    - column_name行より下に続く、A列が空白の各行が実データとなります。


### 実データ行の特殊列について

実データ中、column_nameで以下の名前を持つ列は特別扱いとなります。

- id
    - システム処理フラグの記載によらず、常に出力対象です。
- ver
    - 出力対象ではありません。リリース対象番号を記載しており、将来的にマスターデータ出力時に指定したバージョンまでの内容を出力するように制御するための予約です。現在は常に無視します。
- envs
    - 出力対象ではありません。開発テスト環境が複数ある場合に備えて、環境名を任意に指定できるようにするための予約です。現在は常に無視します。
- name
    - この行の情報に付けられる名前です。常時出力対象です。